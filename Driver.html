<!DOCTYPE html>
<html lang="en">

Tanner Bailey, Warren Jernigan, and Ben Sauberman<br>
!!! Let's Play Mario !!! <br>
Computer Science 363 - Computer Graphics <br>
Final Project - Due December 11th @5PM <br>
<br>
<br>

<script id = "vertex-shader" type = "x-shader/x-vertex">
    attribute vec4 vertexPosition;
    attribute vec4 vertexColor;
    attribute vec4 vertexNormal;

    uniform float runRate;
    uniform float jumpRate;
    uniform mat4 modelViewMat;
    uniform mat4 projectionMat;

    uniform vec4 ambientProduct, diffuseProduct, specularProduct;
    uniform vec4 lightPosition;
    uniform float shininess;

    varying vec4 fColor;
    void
    main(){
        mat4 runMat    = mat4(1.0, 0.0, 0.0, 0.0,
                              0.0, 1.0, 0.0, 0.0,
                              0.0, 0.0, 1.0, 0.0,
                              runRate, 0.0, 0.0, 1.0);
        mat4 jumpMat   = mat4(1.0, 0.0, 0.0, 0.0,
                              0.0, 1.0, 0.0, 0.0,
                              0.0, 0.0, 1.0, 0.0,
                              0.0, jumpRate, 0.0, 1.0);
       gl_Position     = projectionMat * modelViewMat * runMat *
                          mat4(1.0                    , 0.0            , 0.0                , 0.0,
                               0.0                    , 1.0            , 0.0                , 0.0,
                               0.0                    , 0.0            , 1.0                , 0.0,
                               3.0                    , 0.0            , 0.0                , 1.0) *
                          jumpMat * vertexPosition;
       vec4 position   = -(modelViewMat * runMat *
                          mat4(1.0                    , 0.0            , 0.0                , 0.0,
                               0.0                    , 1.0            , 0.0                , 0.0,
                               0.0                    , 0.0            , 1.0                , 0.0,
                               3.0                    , 0.0            , 0.0                , 1.0) *
                          jumpMat * vertexPosition);

        vec4 light    = lightPosition;
        vec4 L        = normalize(light - position);
        vec4 E        = normalize(-position);
        vec4 H        = normalize(L + E);
        vec4 N        = -(modelViewMat * runMat *
                          mat4(1.0                    , 0.0            , 0.0                , 0.0,
                               0.0                    , 1.0            , 0.0                , 0.0,
                               0.0                    , 0.0            , 1.0                , 0.0,
                               3.0                    , 0.0            , 0.0                , 1.0) *
                               jumpMat * vertexNormal);
        N            = normalize(N);

        vec4  ambient   = ambientProduct;
        float kDiffuse  = max(dot(L, N), 0.0);
        vec4  diffuse   = kDiffuse * diffuseProduct;
        float kSpecular = pow(max(dot(N, H), 0.0), shininess);
        vec4  specular  = kSpecular * specularProduct;
        if(dot(L, N) < 0.0){
            specular = vec4(0.0, 0.0, 0.0, 1.0);
        }

        fColor = specular + ambient + diffuse;
        fColor.a = 1.0;
    }
</script>

<script id = "fragment-shader" type = "x-shader/x-vertex">
precision mediump float;
varying vec4 fColor;

void
main(){
    gl_FragColor = fColor;
}

</script>

<script type="text/javascript" src="../Tanner_Ben_Warren_Graphics_FP/webgl-utils.js"></script>
<script type="text/javascript" src="../Tanner_Ben_Warren_Graphics_FP/initShaders.js"></script>
<script type="text/javascript" src="../Tanner_Ben_Warren_Graphics_FP/MV.js"></script>
<script type="text/javascript" src="Driver.js"></script>

<canvas id="gl-canvas" width="512" height="512">
    Oops ... your browser doesn't support the HTML5 canvas element
</canvas>

<button class = "button bbutton" id = RunButton>Run/Stop</button>
<button class = "button rbutton" id = JumpButton>Jump/Drop</button>
<button class = "button gbutton" id = SaveButton>Save The Princess!</button>

</html>